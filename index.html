<!doctype html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>






<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.1" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="玉英博客" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.1" />






<meta name="description" content="将来的你，一定会感谢现在拼命努力的自己">
<meta property="og:type" content="website">
<meta property="og:title" content="玉英博客">
<meta property="og:url" content="http://zhangyuki.github.io/index.html">
<meta property="og:site_name" content="玉英博客">
<meta property="og:description" content="将来的你，一定会感谢现在拼命努力的自己">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="玉英博客">
<meta name="twitter:description" content="将来的你，一定会感谢现在拼命努力的自己">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    sidebar: {"position":"left","display":"post","offset":12,"offset_float":0,"b2t":false,"scrollpercent":false},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://zhangyuki.github.io/"/>





  <title>玉英博客</title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  














  
  
    
  

  <div class="container sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">玉英博客</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">家庭、工作、学习、旅行</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://zhangyuki.github.io/2017/08/04/react踩过的坑/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="玉英（小丸子）">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="http://imgsrc.baidu.com/forum/w%3D580/sign=aa09a14c8244ebf86d716437e9f8d736/ea6dc811728b4710787b6583c6cec3fdfd032371.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="玉英博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/08/04/react踩过的坑/" itemprop="url">
                  react 踩过的坑
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-08-04T09:13:31+08:00">
                2017-08-04
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h4 id="1-在JSX的元素中写入内联样式，例如"><a href="#1-在JSX的元素中写入内联样式，例如" class="headerlink" title="1 在JSX的元素中写入内联样式，例如"></a>1 在JSX的元素中写入内联样式，例如</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">&lt;div style=&#123;<span class="string">"color:blue"</span>&#125;&gt;&lt;/div&gt;</div><div class="line">报错：warning：Style prop value must be an object  react/style-prop-object</div></pre></td></tr></table></figure>
<p>原因：在React框架的JSX编码格式要求，style必须是一个对象<br>解决方法：除了外部那个表示Javascript语句的花括号外，里面必须再写一个花括号{}包含的对象，例如<div style="{" {="" color:“blue”="" }=""></div>，外部的{ }表示这是Javascript句法，里面的{  }是一个对象</p>
<h4 id="2-遍历数组元素："><a href="#2-遍历数组元素：" class="headerlink" title="2 遍历数组元素："></a>2 遍历数组元素：</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">var arr=[1,2,3]</div><div class="line">arr.map(<span class="keyword">function</span>(x)&#123;</div><div class="line">  <span class="built_in">return</span> (&lt;div&gt;&lt;/div&gt;);</div><div class="line">&#125;)</div><div class="line">报错：Warning:Each child <span class="keyword">in</span> an array or iterator should have a unique <span class="string">"key"</span> prop. Check the render method of `NavBlock`</div></pre></td></tr></table></figure>
<p>原因：在React中数组遍历返回元素或组件时需加上key属性作为唯一标识<br>解决方法：写成<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">var arr=[1,2,3]</div><div class="line">arr.map(<span class="keyword">function</span>(x,i)&#123;</div><div class="line">  <span class="built_in">return</span> (&lt;div key=i&gt;&lt;/div&gt;);</div><div class="line">&#125;)</div></pre></td></tr></table></figure></p>
<h4 id="3-在render-函数中返回时这样写："><a href="#3-在render-函数中返回时这样写：" class="headerlink" title="3 在render()函数中返回时这样写："></a>3 在render()函数中返回时这样写：</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="title">render</span></span>()&#123;</div><div class="line">  <span class="built_in">return</span> &lt;div&gt;&lt;/div&gt;</div><div class="line">        &lt;div&gt;&lt;/div&gt;</div><div class="line">        &lt;div&gt;&lt;/div&gt;</div><div class="line">  &#125;</div></pre></td></tr></table></figure>
<p>报错：Adjacent JSX elements must be wrapped in an enclosing tag (75:8)<br>原因：render()函数中返回的所有元素需要包裹在一个外部元素里面<br>解决方法：可改写为：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="title">render</span></span>()&#123;</div><div class="line">  <span class="built_in">return</span>  &lt;section&gt;</div><div class="line">                &lt;div&gt;&lt;/div&gt;</div><div class="line">                &lt;div&gt;&lt;/div&gt;</div><div class="line">                &lt;div&gt;&lt;/div&gt;</div><div class="line">          &lt;/section&gt;</div><div class="line">  &#125;</div></pre></td></tr></table></figure></p>
<p>最后一点—不能写成：（return语句和返回元素不在同一行会被解析器视为返回null导致错误)<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="title">render</span></span>()&#123;</div><div class="line">  <span class="built_in">return</span>  </div><div class="line">       &lt;section&gt;</div><div class="line">          &lt;div&gt;&lt;/div&gt;</div><div class="line">          &lt;div&gt;&lt;/div&gt;</div><div class="line">          &lt;div&gt;&lt;/div&gt;</div><div class="line">       &lt;/section&gt;</div><div class="line">   &#125;</div></pre></td></tr></table></figure></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://zhangyuki.github.io/2017/08/03/React生命周期总结/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="玉英（小丸子）">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="http://imgsrc.baidu.com/forum/w%3D580/sign=aa09a14c8244ebf86d716437e9f8d736/ea6dc811728b4710787b6583c6cec3fdfd032371.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="玉英博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/08/03/React生命周期总结/" itemprop="url">
                  React生命周期总结
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-08-03T20:10:22+08:00">
                2017-08-03
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="react生命周期流程"><a href="#react生命周期流程" class="headerlink" title="react生命周期流程"></a>react生命周期流程</h3><h4 id="1-初始化，首次render"><a href="#1-初始化，首次render" class="headerlink" title="1.初始化，首次render"></a>1.初始化，首次render</h4><p>getDefaultProps 方法可以用来设置组件属性的默认值,在组件被建立时候就立即调用</p>
<p>getInitialState 方法用于定义初始状态</p>
<p>componentWillMount只在初始化时候被调用一次</p>
<p>render()</p>
<p>componentDidmount()在子组件也都加载完毕后执行，在RN中就是指组件初始化加载完毕，在react中DOM渲染完成</p>
<h4 id="2-props发生改变时候更新"><a href="#2-props发生改变时候更新" class="headerlink" title="2.props发生改变时候更新"></a>2.props发生改变时候更新</h4><p>componentWillReceiveProps(nextProps)</p>
<p>componentWillReceiveProps方法可以比较this.props和nextProps来看是否发生了变化，然后可以进行setState等操作。<br>注意只要父组件此方法触发，那么子组件也会触发，也就是说父组件更新，子组件也会跟着更新。</p>
<p>shouldComponentUpdate(nextProps, nextState)</p>
<p>shouldComponentUpdate 方法在接收了新的props或state后触发，可以通过返回true或false来控制后面的生命周期流程是否触发。</p>
<p>componentWillUpdate(nextProps, nextState)</p>
<p>componentWillUpdate在props或state改变或shouldComponentUpdate返回true后触发。不可在其中使用setState。<br>render()</p>
<p>重新渲染。</p>
<p>componentDidupdate(prevProps, prevState)</p>
<p>会等子组件也都更新完后才触发。</p>
<h4 id="3-state发生改变时候更新"><a href="#3-state发生改变时候更新" class="headerlink" title="3.state发生改变时候更新"></a>3.state发生改变时候更新</h4><p>shouldComponentUpdate(nextProps, nextState)</p>
<p>shouldComponentUpdate 方法在setState后state发生改变后触发，你可以通过返回true或false来控制后面的生命周期流程是否触发。</p>
<p>componentWillUpdate(nextProps, nextState)</p>
<p>componentWillUpdate在state改变或shouldComponentUpdate返回true后触发。不可在其中使用setState。</p>
<p>render()</p>
<p>重新渲染。</p>
<p>componentDidupdate(prevProps, prevState)</p>
<p>会等子组件也都更新完后才触发。</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://zhangyuki.github.io/2017/08/01/总结技术/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="玉英（小丸子）">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="http://imgsrc.baidu.com/forum/w%3D580/sign=aa09a14c8244ebf86d716437e9f8d736/ea6dc811728b4710787b6583c6cec3fdfd032371.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="玉英博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/08/01/总结技术/" itemprop="url">
                  未命名
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-08-01T18:35:36+08:00">
                2017-08-01
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>webpack与gulp</p>
<p>webpack是一个打包工具<br>gulp是构建工具</p>
<p>MVC</p>
<ol>
<li>View 传送指令到 Controller</li>
<li>Controller 完成业务逻辑后，要求 Model 改变状态</li>
<li>Model 将新的数据发送到 View，用户得到反馈</li>
</ol>
<p>MVVM</p>
<p>model - View - ViewModle</p>
<p>分离视图和模型 </p>
<ul>
<li>ViewModel，注意这里的“Model”指的是View的Model，跟上面那个Model不是一回事。所谓View的Model就是包含View的一些数据属性和操作的这么一个东东，这种模式的关键技术就是数据绑定（data binding），View的变化会直接影响ViewModel，ViewModel的变化或者内容也会直接体现在View上。这种模式实际上是框架替应用开发者做了一些工作，开发者只需要较少的代码就能实现比较复杂的交互。</li>
</ul>
<p>布局less</p>
<ul>
<li>变量是@</li>
<li>.class()作为mixin</li>
<li>&amp;:entend(.class); 直接引入</li>
<li>直接申明函数<br>.mixin(@x: 200px) {<br>text-align: center;<br>width: @x;<br>}</li>
<li>when 代替if</li>
<li>// 循环<br>.loop(@counter) when (@counter &gt; 0) {<br>.loop((@counter - 1));    // next iteration<br>width: (10px * @counter); // code for each iteration<br>}</li>
</ul>
<p>SASS</p>
<ul>
<li>变量 $fontSize: 12px;  也可以以数组。map形式出现， ！global。！default</li>
<li>变量作为属性或在某些特殊情况下等则必须要以#{$variables}</li>
<li>@each遍历<br>$headings: (h1: 2em, h2: 1.5em, h3: 1.2em);<br>@each $header, $size in $headings {<br>  #{$header} {<pre><code>font-size: $size;
</code></pre>  }<br>}</li>
<li>// mixin<br>@mixin center($aa: 100px) {<br>  width: $aa;<br>}<br>.demo {<br>  @include center(80px)<br>}</li>
<li>继承 @extend .class;</li>
</ul>
<p>安全问题</p>
<p>XSS（cross-site-srcipting）</p>
<p>js注入</p>
<ul>
<li>将前端输出数据都进行转义encodeURI</li>
<li>cookie 加上HttPOnly</li>
</ul>
<p>CSRF攻击—跨站请求伪造</p>
<p>第三方请求调用</p>
<h4 id="es6-新特性"><a href="#es6-新特性" class="headerlink" title="es6 新特性"></a>es6 新特性</h4><p>箭头操作符<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">var arr = [1, 2, 3];</div><div class="line">arr.forEach(<span class="keyword">function</span>(i, v, a) &#123;</div><div class="line">  console.log(v);</div><div class="line">&#125;);</div><div class="line">arr.forEach(v = &gt; console.log(v));</div></pre></td></tr></table></figure></p>
<h4 id="类的支持"><a href="#类的支持" class="headerlink" title="类的支持"></a>类的支持</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">//类的定义</div><div class="line">class baseModel &#123;</div><div class="line">  //ES6中新型构造器</div><div class="line">  constructor(options, data) &#123; // class constructor，node.js 5.6暂时不支持options = &#123;&#125;, data = []这样传参</div><div class="line">    this.name = <span class="string">'Base'</span>;</div><div class="line">    this.url = <span class="string">'http://azat.co/api'</span>;</div><div class="line">    this.data = data;</div><div class="line">    this.options = options;</div><div class="line">  &#125;</div><div class="line">  //实例方法</div><div class="line">   <span class="function"><span class="title">getName</span></span>() &#123; // class method</div><div class="line">      console.log(`Class name: <span class="variable">$&#123;this.name&#125;</span>`);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">//测试我们的类</div><div class="line">var animal=new Animal(<span class="string">'dummy'</span>),</div><div class="line">wayou=new Programmer(<span class="string">'wayou'</span>);</div><div class="line">animal.sayName(); //输出 ‘My name is dummy’</div><div class="line">wayou.sayName(); //输出 ‘My name is wayou’</div><div class="line">wayou.program(); //输出 ‘I<span class="string">'m coding...’</span></div></pre></td></tr></table></figure>
<h4 id="字符串模板"><a href="#字符串模板" class="headerlink" title="字符串模板"></a>字符串模板</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">// 产生一个随机数</div><div class="line">var num = Math.random();</div><div class="line">// 将这个数字输出到console</div><div class="line">console.log(`your num is <span class="variable">$&#123;num&#125;</span>`);</div></pre></td></tr></table></figure>
<h4 id="解构"><a href="#解构" class="headerlink" title="解构"></a>解构</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">var [x,y]=getVal(),//函数返回值的解构</div><div class="line">    [name,,age]=[<span class="string">'wayou'</span>,<span class="string">'male'</span>,<span class="string">'secrect'</span>];//数组解构</div><div class="line"></div><div class="line"><span class="keyword">function</span> <span class="function"><span class="title">getVal</span></span>() &#123;</div><div class="line">    <span class="built_in">return</span> [ 1, 2 ];</div><div class="line">&#125;</div><div class="line"></div><div class="line">console.log(<span class="string">'x:'</span>+x+<span class="string">', y:'</span>+y);//输出：x:1, y:2 </div><div class="line">console.log(<span class="string">'name:'</span>+name+<span class="string">', age:'</span>+age);//输出： name:wayou, age:secrect</div></pre></td></tr></table></figure>
<h4 id="let与const-关键字"><a href="#let与const-关键字" class="headerlink" title="let与const 关键字"></a>let与const 关键字</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">for</span> (<span class="built_in">let</span> i=0;i&lt;2;i++)console.log(i);//输出: 0,1</div><div class="line">console.log(i);//输出：undefined,严格模式下会报错</div></pre></td></tr></table></figure>
<h4 id="Promises"><a href="#Promises" class="headerlink" title="Promises"></a>Promises</h4><p>Promises是处理异步操作的一种模式，之前在很多三方库中有实现，比如jQuery的deferred 对象。当你发起一个异步请求，并绑定了.when(), .done()等事件处理程序时，其实就是在应用promise模式。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">//创建promise</div><div class="line">var promise = new Promise(<span class="keyword">function</span>(resolve, reject) &#123;</div><div class="line">    // 进行一些异步或耗时操作</div><div class="line">    <span class="keyword">if</span> ( /*如果成功 */ ) &#123;</div><div class="line">        resolve(<span class="string">"Stuff worked!"</span>);</div><div class="line">    &#125; <span class="keyword">else</span> &#123;</div><div class="line">        reject(Error(<span class="string">"It broke"</span>));</div><div class="line">    &#125;</div><div class="line">&#125;);</div><div class="line">//绑定处理程序</div><div class="line">promise.then(<span class="keyword">function</span>(result) &#123;</div><div class="line">  //promise成功的话会执行这里</div><div class="line">    console.log(result); // <span class="string">"Stuff worked!"</span></div><div class="line">&#125;, <span class="keyword">function</span>(err) &#123;</div><div class="line">  //promise失败会执行这里</div><div class="line">    console.log(err); // Error: <span class="string">"It broke"</span></div><div class="line">&#125;);</div></pre></td></tr></table></figure></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://zhangyuki.github.io/2017/07/28/跨域问题/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="玉英（小丸子）">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="http://imgsrc.baidu.com/forum/w%3D580/sign=aa09a14c8244ebf86d716437e9f8d736/ea6dc811728b4710787b6583c6cec3fdfd032371.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="玉英博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/07/28/跨域问题/" itemprop="url">
                  跨域
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-07-28T14:47:23+08:00">
                2017-07-28
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h4 id="document-domain-子域名跨域"><a href="#document-domain-子域名跨域" class="headerlink" title="document.domain 子域名跨域"></a>document.domain 子域名跨域</h4><p>这跨域个方法主要适用于 ajax跨子域，比如在 a.takozhang.cn 中使用ajax调用 takozhang.cn 中的接口时。</p>
<ol>
<li>在被访问接口的服务器中，新建一个proxy.html文件，里面的代码是：<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">&lt;script&gt;</div><div class="line">  document.domain = <span class="string">'takozhang.cn'</span></div><div class="line">&lt;/script&gt;</div><div class="line">&lt;script src = <span class="string">'jquery.js'</span>&gt;&lt;/script&gt;</div><div class="line">2. 在调用页面使用一个隐藏的iframe，地址指向proxy.html，代码如下：</div><div class="line">&lt;iframe src=<span class="string">"http://takozhang.cn/proxy.html"</span> id=<span class="string">"proxy"</span>&gt;&lt;/iframe&gt;</div><div class="line">3. 在a.takozhang.cn服务器中进行ajax发送请求的时候，代码如下：</div><div class="line">var iframe = document.getElementById(<span class="string">'proxy'</span>).contentWindow;</div><div class="line">iframe.window.JQuery.ajax(&#123;</div><div class="line">  url: <span class="string">'takozhang.cn/php/index.php'</span>,</div><div class="line">  method: <span class="string">'post'</span>,</div><div class="line">  success: <span class="keyword">function</span>(data)&#123;&#125;,</div><div class="line">  error: <span class="keyword">function</span>(err)&#123;&#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
</li>
</ol>
<h4 id="jsonp"><a href="#jsonp" class="headerlink" title="jsonp"></a>jsonp</h4><p>基本可以适用于任何场景</p>
<ol>
<li>客户端动态创建script标签，并利用src属性去向服务端获取数据 src=”www.a.com/index.php?callback=fn”,切记一定要在后面加上一个callback回调函数</li>
<li>服务端会将请求的json数据放在这个你指定的回调函数里作为参数返回回来，如服务器会返回 fn(data),</li>
<li>客户端写好回调函数的实现，处理数据。<br>4.但是jsonp是存在着一定的风险的,就是你用jsonp, 然后黑客给你发了一张图片。图片的src=”xxx/xxx/xx.jsonp?data=sxx&amp;name=xxxx”,  你点击后。直接请求成功。 。这个就是CSRF 。跨域请求伪造<br>还有一个比较典型的安全问题、XSS 。跨脚本注入js</li>
</ol>
<h4 id="window-name-也就是-iframe"><a href="#window-name-也就是-iframe" class="headerlink" title="window.name 也就是 iframe"></a>window.name 也就是 iframe</h4><p>只用于两个完全不同源的域，比如www.a.com   www.b.com<br>window.name属性有个特征：即在一个窗口(window)的生命周期内,窗口载入的所有的页面都是共享一个window.name</p>
<ol>
<li><p>在www.a.com的服务器中创建一个iframe，并引入www.b.com，代码如下：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">&lt;script&gt;</div><div class="line">  var inf=document.createElement(<span class="string">"iframe"</span>);       //创建iframe</div><div class="line">  inf.src=<span class="string">"http://www.b.com/index.html"</span>+<span class="string">"?h=5"</span>  //加载数据页www.b.com/index.html的同时携带参数h=5</div><div class="line">  var body=document.getElementsByTagName(<span class="string">"body"</span>)[0];</div><div class="line">  body.appendChild(inf);                          //引入iframe</div><div class="line"></div><div class="line">  inf.onload=<span class="function"><span class="title">function</span></span>()&#123;</div><div class="line">    inf.src=<span class="string">'http://www.a.com/index.html'</span>       //iframe加载完成，加载www.a.com域下边的空白页index.html</div><div class="line">    console.log(inf.contentWindow.name)        //输出window.name中的数据</div><div class="line">    body.removeChild(inf)                      //清除iframe</div><div class="line">  &#125;</div><div class="line">&lt;/script&gt;</div></pre></td></tr></table></figure>
</li>
<li><p>在www.b.com中的index.html中进行ajax，并把返回值通过window.name储存，代码如下：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">var str=window.location.href.substr(-1,1);      //获取url中携带的参数值</div><div class="line">$.ajax(&#123;</div><div class="line">    <span class="built_in">type</span>:<span class="string">"post"</span>,</div><div class="line">    url:<span class="string">"http://www.b.com/index.php"</span>+<span class="string">"?m="</span>+str, //通过ajax将查询参数传给php页面</div><div class="line">    success:<span class="keyword">function</span>(res)&#123;</div><div class="line">        window.name=res                         //将接收到的查询数据赋值给window.name</div><div class="line">    &#125;,</div><div class="line">    error:<span class="function"><span class="title">function</span></span>()&#123;</div><div class="line">        window.name=<span class="string">'error'</span></div><div class="line">    &#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
</li>
</ol>
<p>整体过程就是：a服务器的页面中中创建一个iframe，iframe引入b服务器中进行ajax的页面，该页面ajax之后将返回值赋值给window.name，<br>a服务器页面监听iframe事件的加载完成，再将iframe地址指向a服务器中的某个空白页面，然后读取iframe的window.name。</p>
<h4 id="window-postMessage-message-targetOrigin"><a href="#window-postMessage-message-targetOrigin" class="headerlink" title="window.postMessage(message,targetOrigin)"></a>window.postMessage(message,targetOrigin)</h4><p>这个方法是html5新引进的特性，可以使用它来向其它的window对象发送消息，<br>无论这个window对象是属于同源或不同源，目前IE8+、FireFox、Chrome、Opera等浏览器都已经支持window.postMessage方法。</p>
<p>在父页面中嵌入子页面，通过postMessage发送数据。parent.com/index.html中的代码：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">&lt;iframe id=<span class="string">"ifr"</span> src=<span class="string">"child.com/index.html"</span>&gt;&lt;/iframe&gt;</div><div class="line">&lt;script <span class="built_in">type</span>=<span class="string">"text/javascript"</span>&gt;</div><div class="line">window.onload = <span class="function"><span class="title">function</span></span>() &#123;</div><div class="line">  var ifr = document.getElementById(<span class="string">'ifr'</span>);</div><div class="line">  var targetOrigin = <span class="string">'http://child.com'</span>;</div><div class="line">  // 若写成<span class="string">'http://child.com/c/proxy.html'</span>效果一样</div><div class="line">  // 若写成<span class="string">'http://c.com'</span>就不会执行postMessage了</div><div class="line">  ifr.contentWindow.postMessage(<span class="string">'I was there!'</span>, targetOrigin);</div><div class="line">&#125;;</div><div class="line">&lt;/script&gt;</div></pre></td></tr></table></figure></p>
<p>在子页面中通过message事件监听父页面发送来的消息并显示。child.com/index.html中的代码：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">&lt;script <span class="built_in">type</span>=<span class="string">"text/javascript"</span>&gt;</div><div class="line">window.addEventListener(<span class="string">'message'</span>, <span class="keyword">function</span>(event)&#123;</div><div class="line">  // 通过origin属性判断消息来源地址</div><div class="line">  <span class="keyword">if</span> (event.origin == <span class="string">'http://parent.com'</span>) &#123;</div><div class="line">      alert(event.data);    // 弹出<span class="string">"I was there!"</span></div><div class="line">      alert(event.source);</div><div class="line">      // 对parent.com、index.html中window对象的引用</div><div class="line">      // 但由于同源策略，这里event.source不可以访问window对象</div><div class="line">  &#125;</div><div class="line">&#125;, <span class="literal">false</span>);</div><div class="line">&lt;/script&gt;</div></pre></td></tr></table></figure></p>
<p>主要是用来传递信息，父页面使用window.postMessage(),子页面使用<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">window.addEventListener(<span class="string">'message'</span>,<span class="keyword">function</span>(event)&#123;&#125;)</div></pre></td></tr></table></figure></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://zhangyuki.github.io/2017/07/10/js中toFixed精度问题的解决办法/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="玉英（小丸子）">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="http://imgsrc.baidu.com/forum/w%3D580/sign=aa09a14c8244ebf86d716437e9f8d736/ea6dc811728b4710787b6583c6cec3fdfd032371.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="玉英博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/07/10/js中toFixed精度问题的解决办法/" itemprop="url">
                  js中toFixed精度问题的解决办法
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-07-10T17:34:06+08:00">
                2017-07-10
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>最近在做项目的时候，遇到了有四舍五入保留两位的需求，当时不假思索的直接使用了js原生的toFixed方法，结果问题百出。有以下几点问题：</p>
<h5 id="1-四舍五入并不是真正的四舍五入"><a href="#1-四舍五入并不是真正的四舍五入" class="headerlink" title="1.四舍五入并不是真正的四舍五入"></a>1.四舍五入并不是真正的四舍五入</h5><p>这个问题是在测试阶段我们的测试人员提出来的。一开始我也很吃惊，结果待我在控制台试了一些数据之后，我懵逼了,我一直在用的toFixed方法竟然有问题，我竟然糊涂的用它做了很多事！以下是我在chrome上的结果：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">1.35.toFixed(1) // 1.4 正确</div><div class="line">1.335.toFixed(2) // 1.33  错误</div><div class="line">1.3335.toFixed(3) // 1.333 错误</div><div class="line">1.33335.toFixed(4) // 1.3334 正确</div><div class="line">1.333335.toFixed(5)  // 1.33333 错误</div><div class="line">1.3333335.toFixed(6) // 1.333333 错误</div></pre></td></tr></table></figure>
<p>果然有问题，只能网上找资料了，结果又发现同样是上面的一段代码，在IE下又小同大异，以下是IE上的结果：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">1.35.toFixed(1) // 1.4 正确</div><div class="line">1.335.toFixed(2) // 1.34  正确</div><div class="line">1.3335.toFixed(3) // 1.334 正确</div><div class="line">1.33335.toFixed(4) // 1.3334 正确</div><div class="line">1.333335.toFixed(5)  // 1.33334 正确</div><div class="line">1.3333335.toFixed(6) // 1.333334 正确</div></pre></td></tr></table></figure></p>
<p>果然IE才是爸爸。难道是浏览器兼容性问题？兼容性问题难道不应该是出在IE中吗？既然找到问题所在，就好下手。我的办法是把要四舍五入的后一位单独拎出来单独判断。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">let</span> result = number.toString();</div><div class="line">const arr = result.split(<span class="string">'.'</span>);</div><div class="line">const <span class="built_in">integer</span> = arr[0];</div><div class="line">const decimal = arr[1];</div><div class="line">result = <span class="built_in">integer</span> + <span class="string">'.'</span> + decimal.substr(0, n);</div><div class="line">const last = decimal.substr(n, 1);</div><div class="line"></div><div class="line">// 四舍五入，转换为整数再处理，避免浮点数精度的损失</div><div class="line"><span class="keyword">if</span> (parseInt(last, 10) &gt;= 5) &#123;</div><div class="line">const x = Math.pow(10, n);</div><div class="line">result = ((parseFloat(result) * x) + 1) / x;</div><div class="line">result = result.toFixed(n);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="built_in">return</span> result;</div></pre></td></tr></table></figure></p>
<p>自己测了几遍，貌似没什么问题，OK~</p>
<h5 id="2-计算机二进制编码导致的精度问题"><a href="#2-计算机二进制编码导致的精度问题" class="headerlink" title="2.计算机二进制编码导致的精度问题"></a>2.计算机二进制编码导致的精度问题</h5><p>没过多久，测试又提出来页面报错了~~ 心塞啊，怎么可能报错呢？自己debugger，发现页面中的js进了死循环。很明显问题出在toFixed中回调了toFixed，结果没有走出来，继续debugger，又有了进人的发现。以下是控制台测试：</p>
<p>console.log(2.115 <em> 100) // 211.50000000000003<br>console.log(2.0115 </em> 1000) // 2011.4999999999998<br>能告诉我是在闹哪样？好吧，我猜到了，肯定是计算机的进制问题。既然你一直进入循环，我就手动把你拉出来。</p>
<p>result = (Math.round((parseFloat(result)) * x) + 1) / x;<br>强制四舍五入取整，不会进死循环了！</p>
<p>以下是全部代码：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div></pre></td><td class="code"><pre><div class="line">// toFixed兼容方法</div><div class="line">Number.prototype.toFixed = <span class="keyword">function</span> (n) &#123;</div><div class="line">    <span class="keyword">if</span> (n &gt; 20 || n &lt; 0) &#123;</div><div class="line">        throw new RangeError(<span class="string">'toFixed() digits argument must be between 0 and 20'</span>);</div><div class="line">    &#125;</div><div class="line">    const number = this;</div><div class="line">    <span class="keyword">if</span> (isNaN(number) || number &gt;= Math.pow(10, 21)) &#123;</div><div class="line">        <span class="built_in">return</span> number.toString();</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">if</span> (typeof (n) == <span class="string">'undefined'</span> || n == 0) &#123;</div><div class="line">        <span class="built_in">return</span> (Math.round(number)).toString();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="built_in">let</span> result = number.toString();</div><div class="line">    const arr = result.split(<span class="string">'.'</span>);</div><div class="line"></div><div class="line">    // 整数的情况</div><div class="line">    <span class="keyword">if</span> (arr.length &lt; 2) &#123;</div><div class="line">        result += <span class="string">'.'</span>;</div><div class="line">        <span class="keyword">for</span> (<span class="built_in">let</span> i = 0; i &lt; n; i += 1) &#123;</div><div class="line">            result += <span class="string">'0'</span>;</div><div class="line">        &#125;</div><div class="line">        <span class="built_in">return</span> result;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    const <span class="built_in">integer</span> = arr[0];</div><div class="line">    const decimal = arr[1];</div><div class="line">    <span class="keyword">if</span> (decimal.length == n) &#123;</div><div class="line">        <span class="built_in">return</span> result;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">if</span> (decimal.length &lt; n) &#123;</div><div class="line">        <span class="keyword">for</span> (<span class="built_in">let</span> i = 0; i &lt; n - decimal.length; i += 1) &#123;</div><div class="line">            result += <span class="string">'0'</span>;</div><div class="line">        &#125;</div><div class="line">        <span class="built_in">return</span> result;</div><div class="line">    &#125;</div><div class="line">    result = <span class="built_in">integer</span> + <span class="string">'.'</span> + decimal.substr(0, n);</div><div class="line">    const last = decimal.substr(n, 1);</div><div class="line"></div><div class="line">    // 四舍五入，转换为整数再处理，避免浮点数精度的损失</div><div class="line">    <span class="keyword">if</span> (parseInt(last, 10) &gt;= 5) &#123;</div><div class="line">        const x = Math.pow(10, n);</div><div class="line">        result = (Math.round((parseFloat(result) * x)) + 1) / x;</div><div class="line">        result = result.toFixed(n);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="built_in">return</span> result;</div><div class="line">&#125;;</div></pre></td></tr></table></figure></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://zhangyuki.github.io/2017/07/10/程序猿10层楼/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="玉英（小丸子）">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="http://imgsrc.baidu.com/forum/w%3D580/sign=aa09a14c8244ebf86d716437e9f8d736/ea6dc811728b4710787b6583c6cec3fdfd032371.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="玉英博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/07/10/程序猿10层楼/" itemprop="url">
                  程序员的十层楼
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-07-10T16:56:32+08:00">
                2017-07-10
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>自西方文艺复兴以来，中国在自然科学方面落后西方很多，软件领域也不例外。当然现在中国的许多程序员们对此可能有许多不同的意见，有些人认为中国的程序员水平远落后于西方，有些则认为中国的程序员个人能力并不比西方的程序员差，只是整个软件产业落后而已。</p>
<p>那 么，到底中国的程序员水平比西方程序员水平差，还是中国有许多优秀的程序员达到或超过了西方程序员同等水平呢？要解决这个问题，必须先知道程序员有多少种 技术层级，每个层级需要什么样的技术水平，然后再比较中国和西方在各个技术层级的人数，就可以知道到底有没有差距，差距有多大。</p>
<p>当然，对于如何划分程序员的技术层级，不同公司或不同人会有不同的划分标准，下面的划分仅代表个人的观点，如有不当之处，还请砸板砖予以纠正。</p>
<h4 id="第1层-菜鸟"><a href="#第1层-菜鸟" class="headerlink" title="第1层 菜鸟"></a>第1层 菜鸟</h4><p>第1层楼属于地板层，迈进这层楼的门槛是很低的。基本上懂计算机的基本操作，了解计算机专业的一些基础知识，掌握一门基本的编程语言如C/C++，或者Java，或者JavaScript，…，均可入门迈进这层。</p>
<p>在这层上，中国有着绝对的优势，除了从计算机专业毕业的众多人数外，还有大量的通信、自动化、数学等相关专业的人士进入这一行，此外还有众多的其他专业转行的人士，人数绝对比西方多出甚多。并且还有一个优势就是我们这层人员的平均智商比西方肯定高。</p>
<p>没 有多少人愿意一辈子做菜鸟，因为做”菜鸟”的滋味实在是不咋的，整天被老大们吆喝着去装装机器，搭建一下测试环境，或者对照着别人写好的测试用例做一些黑 盒测试，好一点的可以被安排去写一点测试代码。当然如果运气”好”的话，碰到了国内的一些作坊式的公司，也有机会去写一些正式的代码。<br>所以，菜鸟们总是在努力学习，希望爬更高的一层楼去。</p>
<h4 id="第2层-大虾"><a href="#第2层-大虾" class="headerlink" title="第2层 大虾"></a>第2层 大虾</h4><p>从 第1层爬到第2层相对容易一些，以C/C++程序员为例，只要熟练掌握C/C++编程语言，掌握C标准库和常用的各种数据结构算法，掌握STL的 基本实现和使用方法，掌握多线程编程基础知识，掌握一种开发环境，再对各种操作系统的API都去使用一下，搞网络编程的当然对socket编程要好好掌握 一下，然后再学习一些面向对象的设计知识和设计模式等，学习一些测试、软件工程和质量控制的基本知识，大部分人经过2～3年的努力，都可以爬到第2层，晋 升为”大虾”。</p>
<p>中国的”大虾”数量和”菜鸟”数量估计不会少多少，所以这层上仍然远领先于西方。</p>
<p>大虾们通常还是有些自知 之明，知道自己只能实现一些简单的功能，做不了大的东西，有时候还会遇到一些疑难问题给卡住，所以他们对那些大牛级的人物通 常是非常崇拜的，国外的如Robert C. Martin、Linus Torvalds，国内的如求伯君、王志东等通常是他们崇拜的对象。其中的有些人希望有一天也能达到这些大牛级人物的水平，所以他们继续往楼上爬去。</p>
<h4 id="第3层-牛人"><a href="#第3层-牛人" class="headerlink" title="第3层 牛人"></a>第3层 牛人</h4><p>由 于”大虾”们经常被一些疑难问题给卡住，所以有了”大虾”们只好继续学习，他们需要将原来所学的知识进一步熟练掌握，比如以熟练掌握C++编程语 言为例，除了学一些基础性的C++书籍如《C++ Primer》，《Effective C++》，《Think in C++》，《Exception C++》等之外，更重要的是需要了解C++编译器的原理和实现机制，了解操作系统中的内部机制如内存管理、进程和线程的管理机制，了解处理器的基础知识和 代码优化的方法，此外还需要更深入地学习更多的数据结构与算法，掌握更深入的测试和调试知识以及质量管理和控制方法，对各种设计方法有更好的理解等。</p>
<p>学 习上面说的这些知识不是一挥而就的，不看个三五十本书并掌握它是做不到的。以数据结构算法来说，至少要看个5～10本这方面的著作；以软件设计来 说，光懂结构化设计、面向对象设计和一些设计模式是不够的，还要了解软件架构设计、交互设计、面向方面的设计、面向使用的设计、面向数据结构算法的设计、 情感化设计等，否则是很难进到这个楼层的。</p>
<p>当然除了上面说的知识外，大虾们还需要去学习各种经验和技巧。当然这点难不倒他们，现在出版的 书籍众多，网络上的技术文章更是不胜数，然后再去各种 专业论坛里泡一泡，把这些书籍和文章中的各种经验、技能、技巧掌握下来，再去学习一些知名的开源项目如Apache或Linux操作系统的源代码实现等。 此时对付一般的疑难问题通常都不在话下，菜鸟和大虾们会觉得你很”牛”，你也就爬到了第3层，晋升为”牛人”了。</p>
<p>看了上面所讲的要求，可能有些大虾要晕过去了，成为牛人要学这么多东西啊！要求是不是太高了？其实要求一点也不高，这么点东西都掌握不了的话，怎么能让别人觉得你”牛”呢？<br>（略去若干字涉及多核）</p>
<p>在 国内， 一旦成为”牛人”，通常可以到许多知名的公司里去，运气好者可以挂上一个架构师的头衔，甚至挂上一个”首席架构师”或者”首席xx学家”的头衔也不足为 奇。有不少爬到这层的人就以为到了楼顶了，可以眼睛往天上看了，开始目空一切起来，以为自己什么都可以做了，什么都懂了，经常在网络上乱砸板砖是这个群体 的最好写照。由此也看出，国内的牛人数量仍然众多，远多于西方的牛人数量，在这层上仍然是领先的。</p>
<p>也有不少谦虚的”牛人”，知道自己现在还不到半桶水阶段。他们深知爬楼的游戏就像猴子上树一样，往下看是笑脸，往上看是屁股。为了多看笑脸，少看屁股，他们并没有在此停步不前，而是继续寻找到更上一层的楼梯，以便继续往上爬。</p>
<h4 id="第4层-大牛"><a href="#第4层-大牛" class="headerlink" title="第4层 大牛"></a>第4层 大牛</h4><p>从 第3层爬到第4层可不像上面说过的那几层一样容易，要成为大牛的话，你必须要能做牛人们做不了的事情，解决牛人们解决不了问题。比如牛人们通常都不懂写操 作系统，不会写编译器，不懂得TCP/IP协议的底层实现，如果你有能力将其中的任何一个实现得象模象样的话，那么你就从牛人升级为”大牛”了。</p>
<p>当 然，由于各个专业领域的差别，这里举操作系统、编译器、TCP/IP协议只是作为例子，并不代表成为”大牛”一定需要掌握这些知识，以时下热门的 多核编程来说，如果你能比牛人们更深入地掌握其中的各种思想原理，能更加自如的运用，并有能力去实现一个象开源项目TBB库一样的东西，也可以成为”大 牛”，又或者你能写出一个类似Apache一样的服务器，或者写出一个数据库，都可以成为”大牛”。</p>
<p>要成为”大牛”并不是一件简单的事情，需要付出比牛人们多得多的努力，一般来说，至少要看过200~400本左右的专业书籍并好好掌握它，除此之外，还得经常关注网络和期刊杂志上的各种最新信息。</p>
<p>当” 牛人”晋升为”大牛”，让”牛人们”发现有比他们更牛的人时，对”牛人”们的心灵的震撼是可想而知的。由于牛人们的数量庞大，并且牛人对大虾和 菜鸟阶层有言传身教的影响，所以大牛们通常能获得非常高的社会知名度，几乎可以用”引无数菜鸟、大虾、牛人竞折腰”来形容，看看前面提过的Linus Torvalds等大牛，应该知道此言不虚。</p>
<p>虽然成为”大牛”的条件看起来似乎很高似的，但是这层楼并不是很难爬的一层，只要通过一定的努力，素质不是很差，还是有许多”牛人”可以爬到这一层的。由此可知，”大牛”这个楼层的人数其实并不像想像的那么少，例如比尔·盖茨之类的人好像也是属于这一层的。</p>
<p>由于”大牛”这层的人数不少，所以也很难统计除到底是中国的”大牛”数量多还是西方的大牛数量多？我估计应该是个旗鼓相当的数量，或者中国的”大牛”们会更多一些。</p>
<p>看 到这里，可能会有很多人会以为我在这里说瞎话，Linus Torvalds写出了著名的Linux操作系统，我国并没有人写出过类似的东西啊，我国的”大牛”怎么能和西方的比呢? 不知大家注意到没有，Linus Torvalds只是写出了一个”象模象样”的操作系统雏形，Linux后来真正发展成闻名全球的开源操作系统期间，完全是因为许多支持开源的商业公司如 IBM等，派出了许多比Linus Torvalds更高楼层的幕后英雄在里面把它开发出来的。</p>
<p>可能有些菜鸟认为Linus Torvalds是程序员中的上帝，不妨说个小故事：</p>
<p>Linus，Richard Stallman和Don Knuth（高德纳）一同参加一个会议。</p>
<p>Linus 说：”上帝说我创造了世界上最优秀的操作系统。”</p>
<p>Richard Stallman自然不甘示弱地说：”上帝说我创造了世界上最好用的编译器。”</p>
<p>Don Knuth一脸疑惑的说：”等等，等等，我什么时候说过这些话？”</p>
<p>由 此可以看出，Linus Torvalds的技术水平并不像想像中那么高，只是”牛人”和”大虾”觉得”大牛”比他们更牛吧了。在我国，有一些当时还处于”大虾”层的人物，也能写 出介绍如何写操作系统的书，并且书写得非常出色，而且写出了一个有那么一点点象模象样的操作系统来。我想中国的”大牛”们是不会比西方差的，之所以没有人 写出类似的商业产品来，完全是社会环境的原因，并不是技术能力达不到的原因。</p>
<p>“大牛”们之所以成为大牛，主要的原因是因为把”牛人”给盖 了下去，并不是他们自己觉得如何牛。也许有很多菜鸟、大虾甚至牛人觉得”大牛”这层已经 到顶了，但大多数”大牛”估计应该是有自知之明的，他们知道自己现在还没有爬到半山腰，也就勉强能算个半桶水的水平，其中有些爬到这层没有累趴下，仍然能 量充沛，并且又有志者，还是会继续往更上一层楼爬的。</p>
<p>看到这里，也许有些菜鸟、大虾、牛人想不明白了，还有比”大牛”们更高的楼层，那会是什么样的楼层？下面就来看看第5层楼的奥妙。</p>
<h4 id="第5层-专家"><a href="#第5层-专家" class="headerlink" title="第5层 专家"></a>第5层 专家</h4><p>当 大牛们真正动手做一个操作系统或者类似的其他软件时，他们就会发现自己的基本功仍然有很多的不足。以内存管理为例，如果直接抄袭Linux或者其 他开源操作系统的内存管理算法，会被人看不起的，如果自动动手实现一个内存管理算法，他会发现现在有关内存管理方法的算法数量众多，自己并没有全部学过和 实践过，不知道到底该用那种内存管理算法。</p>
<p>看到这里，可能有些人已经明白第5层楼的奥妙了，那就是需要做基础研究，当然在计算机里，最重要的就是”计算”二字，程序员要做基础研究，主要的内容就是研究非数值”计算”。</p>
<p>非 数值计算可是一个非常庞大的领域，不仅时下热门的”多核计算”与”云计算”属于非数值计算范畴，就是软件需求、设计、测试、调试、评估、质量控制、软件工 程等本质上也属于非数值计算的范畴，甚至芯片硬件设计也同样牵涉到非数值计算。如果你还没有真正领悟”计算”二字的含义，那么你就没有机会进到 这层楼来。</p>
<p>可能有人仍然没有明白为什么比尔·盖茨被划在了大牛层，没有进到这层来。虽然比尔·盖茨大学未毕业，学历不够，但是家有藏书2 万余册，进入软件这个 行业比绝大部分人都早，撇开他的商业才能不谈，即使只看他的技术水平，也可以算得上是学富五车，顶上几个普通的计算机软件博士之和是没有问题的，比起 Linus Torvalds之类的”大牛”们应该技高一筹才对，怎么还进不了这层楼呢？</p>
<p>非常遗憾的是，从Windows操作系统的实现来看，其对计算的理解是很肤浅的，如果把Google对计算方面的理解比做大学生，比尔·盖茨只能算做一个初中生，所以比尔·盖茨永远只能做个大牛人，成不了”专家”。</p>
<p>看到这里，也许国内的大牛们要高兴起来了，原来比尔·盖茨也只和我等在同一个层次，只要再升一层就可以超越比尔·盖茨了。不过爬到这层可没有从”牛 人”升为”大牛”那么简单，人家比尔·盖茨都家有2万多册书，让你看个500~1000本以上的专业书籍并掌握好它应该要求不高吧。当然，这并不是主要的 条件，更重要的是，需要到专业的学术站点去学习了，到ACM，IEEE，Elsevier，SpringerLink，SIAM等地方去下载论文应该成为 你的定期功课，使用Google搜索引擎中的学术搜索更是应该成为你的日常必修课。此外，你还得经常关注是否有与你研究相关的开源项目冒出来，例如当听到 有TBB这样针对多核的开源项目时，你应该第一时间到Google里输入”TBB”搜索一下，将其源代码下载下来好好研究一番，这样也许你的一只脚已经快 迈进了这层楼的门槛。</p>
<p>当你象我上面说的那样去做了以后，随着时间的推移，总会有某天，你发现，在很多小的领域里，你已经学不到什么新东西 了，所有最新出来的研究成果你几 乎都知道。此时你会发现你比在做”牛人”和”大牛”时的水平不知高出了多少，但是你一点也”牛”不起来，因为你学的知识和思想都是别人提出来的，你自己并 没有多少自己的知识和思想分享给别人，所以你还得继续往楼上爬才行。</p>
<p>我不知道国内的”专家”到底有多少，不过有一点可以肯定的是，如果把那些专门蒙大家的”砖家”也算上的话，我们的砖家比西方的要多得多。</p>
<h4 id="第6层-学者"><a href="#第6层-学者" class="headerlink" title="第6层 学者"></a>第6层 学者</h4><p>当”专家”们想继续往上一层楼爬时，他们几乎一眼就可以看到楼梯的入口，不过令他们吃惊的是，楼梯入口处竖了一道高高的门槛，上面写着”创新”二字。不幸的是，大多数人在爬到第5层楼时已经体能消耗过度，无力翻过这道门槛。</p>
<p>有少数体能充足者，可以轻易翻越这道门槛，但是并不意味着体力消耗过度者就无法翻越，因为你只是暂时还没有掌握恢复体能的方法而已，当掌握了恢复体能的方法，将体能恢复后，你就可以轻易地翻越这道门槛了。</p>
<p>怎 么才能将体能恢复呢？我们的老祖宗”孔子”早就教导过我们”温故而知新”，在英文里，研究的单词是”research”，其前缀”re” 和”search”分别是什么意思不用我解释吧。或许有些人觉得”温故而知新”和”research”有些抽象，不好理解，我再给打个简单的比方，比如你 在爬一座高山，爬了半天，中途体力不支，怎么恢复体力呢？自然是休息一下，重新进食一些食物，体力很快就可以得到恢复。</p>
<p>由此可知，对体能 消耗过度者，休息＋重新进食通常是恢复体能的最佳选择。可惜的是，国内的老板们并不懂得这点，他们的公司里不仅连正常国家规定的休 息时间都不给足，有些公司甚至有员工”过劳死”出现。所以国内能翻越”创新”这道门槛的人是”少之又少”，和西方比起来估计是数量级的差别。</p>
<p>再 说说重新进食的问题，这个重新进食是有讲究的，需要进食一些基础性易消化的简单食物，不能进食山珍海味级的复杂食物，否则很难快速吸收。以查找为例，并不 是去天天盯着那些复杂的查找结构和算法进行研究，你需要做的是将二分查找、哈希查找、普通二叉树查找等基础性的知识好好地复习几遍。</p>
<p>以哈 希查找为例，首先你需要去将各种冲突解决方法如链式结构、二次哈希等编写一遍，再试试不同种类的哈希函数，然后还需要试试在硬盘中如何实现哈希 查找，并考虑数据从硬盘读到内存后，如何组织硬盘中的数据才能快速地在内存中构建出哈希表来，…，这样你可能需要将一个哈希表写上十几个不同的版本， 并比较各个版本的性能、功能方面的区别和适用范围。</p>
<p>总之，对任何一种简单的东西，你需要考虑各种各样的需求，以需求来驱动研究。最后你将各种最基础性的查找结构和算法都了然于胸后，或许某天你再看其他更复杂的查找算法，或者你在散步时，脑袋里灵光一现，突然间就发现了更好的方法，也就从专家晋升为”学者”了。</p>
<p>学者所做的事情，通常都是在前人的基础上，进行一些小的优化和改进，例如别人发明了链式基数排序的方法，你第1个发现使用一定的方法，可以用数组替代链表进行基数排序，性能还能得到进一步提高。</p>
<p>由于学者需要的只是一些小的优化改进，因此中国还是有一定数量的学者。不过和国外的数量比起来，估计少了一个数量级而已。</p>
<p>也许有人会觉得现在中国许多公司申请专利的数量达到甚至超过西方发达国家了，我们的学者数量应该不会比他们少多少。因此，有必要把专利和这里说的创新的区别解释一下。</p>
<p>所 谓专利者，只要是以前没有的，新的东西，都可以申请专利；甚至是以前有的东西，你把他用到了一个新的领域的产品里去，也可以申请专利。比如你在房子里造一 个水泥柱子，只要以前没有人就这件事申请专利，那么你就可以申请专利，并且下次你把水泥柱子挪一个位置，又可以申请一个新的专利；或者你在一个柜子上打上 几个孔，下次又把孔的位置改一改，…，均可申请专利。</p>
<p>这层楼里所说的创新，是指学术层面的创新，是基础研究方面的创新，和专利的概念是完全不同的，难度也是完全不同的。你即使申请了一万个象那种打孔一类的专利，加起来也够不到这层楼里的一个创新。</p>
<p>当你爬到第6层楼时，你也许会有一种突破极限的快感，因为你终于把那道高高的写着”创新”二字的门槛给翻过去了，实现了”0”的突破。这时，你也许 有一种”独上高楼，欲望尽天涯路”的感觉，但是很快你会发现看到的都是比较近的路，远处的路根本看不清楚。如果你还有足够的体力的话，你会想爬到更高一层 的楼层去。</p>
<h4 id="第7层-大师"><a href="#第7层-大师" class="headerlink" title="第7层 大师"></a>第7层 大师</h4><p>从第6层楼爬到第7层楼，并没有多少捷径可走，主要看你有没有足够的能量。你如果能象Hoare 一样设计出一个快速排序的算法；或者象Eugene W. Myers一样设计出了一个用编辑图的最短路径模型来解决diff问题的算法；或者象M.J.D. Powell一样提出了一个能够处理非线性规划问题的SQP方法；或者你发现基于比较的排序算法，它的复杂度下界为O(NLogN)；或者你发现用栈可以 将递归的算法变成非递归的；或者你设计出一个红黑树或者AVL树之类的查找结构；或者你设计出一个象C++或Java一样的语言；或者你发明了 UML；…，你就爬到了第7层，晋升为”大师”了。</p>
<p>上面举的这些例子中，其中有些人站的楼层比这层高，这里只是为了形象说明而举例他 们的某个成就。从上面列出的一些大师的贡献可以看出，成为大师必须要有较大的贡献。首先解决问题必须是比较重要的，其次你要比前辈们在某方面有一个较大的 提高，或者你解决的是一个全新的以前没有解决过的问题；最重要的是，主要的思路和方法必须是你自己提供的，不再是在别人的思路基础上进行的优化和改进。</p>
<p>看了上面这些要求，如果能量不够的话，你也许会觉得有些困难，所以不是每个人都能成为”大师”的。中国软件业里能称得上是”大师”的人，用屈指可数来形容，估计是绰绰有余。值得一提得是，国外的”大师”就象我们的”大牛”一样满天飞的多。</p>
<p>我 把我猜测本国有可能进到这层楼的大师列一下，以起个抛砖引玉的作用。汉王的”手写识别”技术由于是完全保密的，不知道它里面用了什么思想，原创思 想占的比重有多少，因此不知道该把它划到这层楼还是更高一层楼去。原山东大学王小云教授破解DES和MD5算法时，用到的方法不知道是不是完全原创的，如 果是的话也可进到这层楼来。</p>
<p>陈景润虽然没有彻底解决哥德巴赫猜想，但他在解决问题时所用的方法是创新的，因此也可以进到这层楼来。当然，如果能彻底解决哥德巴赫猜想，那么可以算到更高的楼层去。</p>
<p>求 伯君和王志东等大牛们，他们在做WPS和表格处理之类的软件时，不知是否有较大的原创算法在里面，如果有的话就算我错把他们划到了大牛层。由于所学有限， 不知道国内还有那些人能够得上”大师”的级别，或许有少量做研究的教授、院士们，可以达到这个级别，有知道的不妨回个帖子晾一晾。</p>
<p>鉴于”大师”这个称号的光环效应，相信有不少人梦想着成为”大师”。或许你看了前面举的一些大师的例子，你会觉得要成为大师非常困难。不妨说一下，现在有一条通往”大师”之路的捷径打开了，那就是多核计算领域，有大量的处女地等待大家去挖掘。</p>
<p>以前在单核时代开发的各种算法，现在都需要改写成并行的。数据结构与算法、图像处理、数值计算、操作系统、编译器、测试调试等各个领域，都存在大量的机会，可以让你进到这层楼来，甚至有可能让你进到更高一层楼去。</p>
<h4 id="第8层-科学家"><a href="#第8层-科学家" class="headerlink" title="第8层 科学家"></a>第8层 科学家</h4><p>科学家向来都是一个神圣的称号，因此我把他放在了“大师”之上。要成为科学家，你的贡献必须超越大师，不妨随便举一些例子。</p>
<p>如果你象Dijkstra一样设计了ALGOL语言，提出了程序设计的三种基本结构：顺序、选择、循环，那么你可以爬到第8层楼来。顺便说一下，即使抛开这个成果，Dijkstra凭他的PV操作和信号量概念的提出，同样可以进到这层楼。</p>
<p>如果你象Don Knuth一样，是数据结构与算法这门学科的重要奠基者，你也可以进到这层楼来。当然，数据结构和算法这门学科不是某个人开创的，是许多大师和科学家集体开创的。</p>
<p>如果你象巴科斯一样发明了Fortran语言，并提出了巴科斯范式，对高级程序语言的发展起了重要作用，你也可以进到这层楼来。</p>
<p>或者你象Ken Thompson、Dennis Ritchie一样发明了Unix操作系统和功能强大、高效、灵活、表达力强的C语言，对操作系统理论和高级编程语言均作出重大贡献，那么你也可以进到这层楼来。</p>
<p>或者你有Frederick P. Brooks一样机会，可以去领导开发IBM的大型计算机System/360和OS/360操作系统，并在失败后反思总结，写出《人月神话》，对软件工程作出里程碑式的贡献，你也可以进到这层来。</p>
<p>或 者你提出了面向对象设计的基本思想，或者你设计了互联网的TCP/IP协议，或者你象Steven A.Cook一样奠定NP完全性的理论基础，或者你象Frances Allen一样专注于并行计算来实现编译技术，在编译优化理论和技术取得基础性的成就，…，均可进入这层。</p>
<p>当然，如果你发明了C++语言或者Java语言，你进不到这层来，因为你用到的主要思想都是这层楼中的科学家提出的，你自己并没有没有多少原创思想在里面。</p>
<p>看 了上面列出的科学家的成就，你会发现，要成为“科学家”，通常要开创一门分支学科，或者是这个分支学科的奠基者，或者在某个分支学科里作出里程碑式的重大 贡献。如果做不到这些的话，那么你能象Andrew C. Yao（姚期智）一样在对计算理论的多个方向如伪随机数生成，密码学与通信复杂度等各个方向上作出重要贡献，成为集大成者，也可以进入这层楼。</p>
<p>成为“科学家”后，如果你有幸象Dijkstra一样，出现在一个非常重视科学的国度。当你去世时，你家乡满城的人都会自动地去为你送葬。不过如果不幸生错地方的话，能不挨“板砖”估计就算万幸了。</p>
<p>从 上面随便举的一些例子中，你可能能猜到，西方科学家的数量是非常多的，于是你会想中国应该也有少量的科学家吧？我可以很负责任地告诉你一个不幸的结果，中 国本土产生的科学家的数量为0。目前在国内，软件领域的唯一的科学家就是上面提过的姚期智，还是国外请回来的，并不是本土产生的。</p>
<p>可能你 不同意我说的本土科学家数量为0的结论，因为你经常看到有许多公司里都有所谓“首席XX科学家”的头衔。我想说的是，这些所谓的“首席XX科学家”都是远 远够不到这层楼的级别的，有些人的水平估计也就是一个“牛人”或“大牛”的级别，好一点的最多也就一个“学者”的级别。尤其是那些被称作“首席经X学家” 的，基本上可以把称号改为“首席坑大家”。</p>
<p>虽然我国没有人能爬到这层楼上来，但是西方国家仍然有许多人爬到了比这层更高的楼上。如果要问我们比西方落后多少？那么可以简单地回答为：“落后了三层楼”。下面就来看看我们做梦都没有到过的更高一层楼的秘密。</p>
<h4 id="第9层-大科学家"><a href="#第9层-大科学家" class="headerlink" title="第9层 大科学家"></a>第9层 大科学家</h4><p>进 入这层楼的门槛通常需要一些运气，比如某天有个苹果砸到你头上时，你碰巧发现了万有引力，那么你可以进到这层楼来。当然，万有引力几百年前就被人发现了， 如果你现在到处嚷嚷着说你发现了万有引力，恐怕马上会有人打110，然后警察会把你送到不正常人类的聚集地去。因此，这里举万有引力的例子，只是说你要有 类似的成就才能进到这层楼来。</p>
<p>牛顿发现万有引力定律开创 了经典物理运动力学这门学科，如果你也能开创一门大的学科，那么你就从科学家晋升为“大科学家”。比如爱因斯坦创建了相对论，从一个小职员变成了大科学 家。当然大科学家可远不止这两人，数学界里比物理学界更是多得多，如欧几里得创建了平面几何，笛卡尔开创解析几何，还有欧拉、高斯、莱布尼茨等数不清的人 物，跟计算相关的大科学家则有图灵等人。</p>
<p>从上面列出的一些大科学家 可以发现，他们的成就不仅是开创了一个大的学科，更重要的是他们的成就上升到了“公理”的层面。发现公理通常是需要一点运气的，如果你的运气不够好的话， 另外还有一个笨办法也可以进到这层楼来，那就是成为集大成者。例如冯·诺伊曼，对数学的所有分支都非常了解，许多领域都有较大的贡献，即使撇开他对计算机 的开创贡献，成为大科学家照样绰绰有余。</p>
<p>当然，程序员们最关心的是 自己有没有机会变成大科学家。既然计算机这门大学科的开创性成果早就被冯·诺伊曼、图灵等人摘走了，那么程序员们是不是没有机会变成大科学家了呢？我们的 古人说得好：“江山代有才人出，各领风骚数百年”，现在在计算机这门学科下面诞生了许多非常重要的大的分支，所以你还是有足够的机会进到这层楼的。</p>
<p>如 果你能够彻底解决自然语言理解（机器翻译）这门学科中的核心问题，或者你在人工智能或者机器视觉（图像识别）方面有突破性的发现，那么你同样可以轻易地晋 升为“大科学家”。这样当某天你老了去世时，或许那天国人已经觉醒，你也能享受到如Dijkstra一样的待遇，有满城甚至全国的人去为你送葬。</p>
<p>现 在还剩下另外一个大家感兴趣的问题没有讨论，那就是这层中已经出现了牛顿、爱因斯坦、高斯等我们平常人都认为是顶级的科学家，是不是这层已经是楼顶了呢？ 相信还记得本文标题的人应该知道现在仅仅是第9层，还有第10层没有到达呢。可能不少人现在要感到困惑了，难道还有人站在比牛顿、爱因斯坦、高斯等人更高 的楼层上？</p>
<p>这个世界上确实存在可以用一只手的手指数得清的那么几个人，他们爬到了第10层楼上。因此，第10层楼不是虚构的，而是确实存在的。如果对此有疑惑或者认为我在胡诌一番的话，那么不妨继续往下看下去，窥一下第10层楼的秘密。</p>
<h4 id="第10层-大哲"><a href="#第10层-大哲" class="headerlink" title="第10层 大哲"></a>第10层 大哲</h4><p>看了这层楼的名字“大哲”，可能不少人已经猜到了这层楼的秘密，那就是你的成果必须要上升到哲学的高度，你才有机会能进到这层来。</p>
<p>当 然，上升到哲学高度只是一个必要条件，牛顿的万有引力似乎也上升到了哲学的高度，因为不知道引力到底是怎么来的，但是牛顿没有被划到这一层，因为进到这层 还有另外的条件，那就是你的成果必须引起了哲学上的深度思考，并能让人们的世界观向前跨进一大步。窃以为牛顿、爱因斯坦等人的成就还达不到让人们世界观向 前跨进一大步的程度。</p>
<p>所以，这层楼中的人的成就对我们普通人认识世界非常重要，你可以不学相对论，但是你不可以不对这层楼的人所作出的成 就不了解，否则你的世界观就是极其不完整的，会犯许多认识上的错误。不幸的是，中国的科普知识普及还不够到位，知道这层楼成就的人好像并不多，程序员中恐 怕更少。下面就来看看这些用一只手的手指数得清的大哲们，到底有什么成就，能比万有引力定律和相对论还重要。</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://zhangyuki.github.io/2017/07/10/vue-upload/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="玉英（小丸子）">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="http://imgsrc.baidu.com/forum/w%3D580/sign=aa09a14c8244ebf86d716437e9f8d736/ea6dc811728b4710787b6583c6cec3fdfd032371.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="玉英博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/07/10/vue-upload/" itemprop="url">
                  vue-upload
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-07-10T16:14:25+08:00">
                2017-07-10
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="https-github-com-jinzhe-vue-upload"><a href="#https-github-com-jinzhe-vue-upload" class="headerlink" title="https://github.com/jinzhe/vue-upload"></a><a href="https://github.com/jinzhe/vue-upload" target="_blank" rel="external">https://github.com/jinzhe/vue-upload</a></h3><p>基于vuejs+webpack环境使用的上传组件<br>1.支持服务器的域名和接口单独设置<br>2.支持自定义提交字段<br>3.支持自定义xhr 提交的header字段/表单name/限定上传格式/文件大小／<br>4.支持图片上传前预先裁剪，其中包括裁减按钮替换、宽高、质量（quality）<br>5.支持自定义回调方法<br>6.支持裁减图片缩放，包括移动端手势支持</p>
<h3 id="Options"><a href="#Options" class="headerlink" title="Options"></a>Options</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">:server (string) 服务器地址 // Server host,like <span class="string">"http://jinzhe.net"</span></div><div class="line">:api (string) // Server api path,like <span class="string">"/api/v1/getdata/"</span></div><div class="line">:params (object) 额外附加的字段，它是一个object</div><div class="line">:filename (string) 文件表单名称，默认为file</div><div class="line">:file (string) 返回的文件名或地址</div><div class="line">:ext (string) 限制文件格式如“jpg,png,zip”</div><div class="line">:header (object) 提交服务端的头部字段，它是一个object</div><div class="line">:<span class="built_in">limit</span> (int) 限制大小</div><div class="line">:multiple	(bool) 多文件上传</div><div class="line">:preview (bool)	预览图片</div><div class="line">:auto	(bool)	是否自动上传</div><div class="line">:crop (bool) 是否开启裁减</div><div class="line">:width (int) 裁减宽度</div><div class="line">:height (int) 裁减高度</div><div class="line">:quality (<span class="built_in">float</span>) 裁减质量 （0～1），默认0.8</div><div class="line">:ok (string) 确定裁减显示文本</div><div class="line">:cancel (string) 取消裁减显示文本</div><div class="line">:container (DOM) 包含组件的根dom节点，这个是为了在网页内容很长的情况下为了显示正常使用的（移动滚动条），不设置默认指向document.body。</div><div class="line">:success (<span class="keyword">function</span>) 成功上传回调</div></pre></td></tr></table></figure>
<h3 id="How-to-use"><a href="#How-to-use" class="headerlink" title="How to use?"></a>How to use?</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div></pre></td><td class="code"><pre><div class="line">&lt;template&gt;</div><div class="line">&lt;div class=<span class="string">"layout"</span>&gt;</div><div class="line">    &lt;div class=<span class="string">"demo"</span>&gt;</div><div class="line">        &lt;upload </div><div class="line">        :server=<span class="string">"upload.server"</span> </div><div class="line">        :api=<span class="string">"upload.api"</span> </div><div class="line">        :params=<span class="string">"upload.params"</span></div><div class="line">        :success=<span class="string">"upload.success"</span></div><div class="line">        :file.sync=<span class="string">"upload.file"</span></div><div class="line">        :crop=<span class="string">"upload.crop"</span></div><div class="line">        :width=<span class="string">"upload.width"</span></div><div class="line">        :height=<span class="string">"upload.height"</span></div><div class="line">        :ok=<span class="string">"upload.ok"</span> </div><div class="line">        :cancel=<span class="string">"upload.cancel"</span>&gt;</div><div class="line">            &lt;img src=<span class="string">"./upload.svg"</span>&gt;</div><div class="line">        &lt;/upload&gt;</div><div class="line">    &lt;/div&gt;</div><div class="line">&lt;/div&gt;</div><div class="line">&lt;/template&gt;</div><div class="line"></div><div class="line">&lt;script&gt;</div><div class="line">import upload from <span class="string">"./upload.vue"</span></div><div class="line"><span class="built_in">export</span> default &#123;</div><div class="line">    components:&#123;</div><div class="line">        upload</div><div class="line">    &#125;,</div><div class="line">    <span class="function"><span class="title">data</span></span>() &#123;</div><div class="line">        <span class="built_in">return</span> &#123;</div><div class="line">            upload:&#123;</div><div class="line">                server:<span class="string">""</span>,</div><div class="line">                api:<span class="string">""</span>,</div><div class="line">                params:&#123;</div><div class="line">                    token:<span class="string">"test"</span></div><div class="line">                &#125;,</div><div class="line">                file:<span class="string">""</span>,</div><div class="line">                preview:<span class="literal">true</span>,</div><div class="line">                crop:<span class="literal">true</span>,</div><div class="line">                width:400,</div><div class="line">                height:400,</div><div class="line">                cancel:<span class="string">"取消"</span>,</div><div class="line">                ok:<span class="string">"裁剪"</span>,</div><div class="line">                success:(data)=&gt;&#123;</div><div class="line">                    alert(data.length)</div><div class="line">                &#125;</div><div class="line">            &#125;,</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line">&lt;/script&gt;</div></pre></td></tr></table></figure>
<h3 id="在你的项目中执行命令"><a href="#在你的项目中执行命令" class="headerlink" title="在你的项目中执行命令"></a>在你的项目中执行命令</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm install vue-upload --save-dev</div></pre></td></tr></table></figure>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://zhangyuki.github.io/2017/07/10/安装node的最新版本/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="玉英（小丸子）">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="http://imgsrc.baidu.com/forum/w%3D580/sign=aa09a14c8244ebf86d716437e9f8d736/ea6dc811728b4710787b6583c6cec3fdfd032371.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="玉英博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/07/10/安装node的最新版本/" itemprop="url">
                  安装node的最新版本
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-07-10T15:56:46+08:00">
                2017-07-10
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="首先，看看你的node版本"><a href="#首先，看看你的node版本" class="headerlink" title="首先，看看你的node版本"></a>首先，看看你的node版本</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">node -v</div></pre></td></tr></table></figure>
<h3 id="清除node的cache"><a href="#清除node的cache" class="headerlink" title="清除node的cache"></a>清除node的cache</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo npm cache clean <span class="_">-f</span></div></pre></td></tr></table></figure>
<h3 id="利用n来管理node的版本"><a href="#利用n来管理node的版本" class="headerlink" title="利用n来管理node的版本"></a>利用n来管理node的版本</h3><p>安装n模块<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo npm install -g n</div></pre></td></tr></table></figure></p>
<h3 id="在你的控制面板那里看你安装了node的那些版本"><a href="#在你的控制面板那里看你安装了node的那些版本" class="headerlink" title="在你的控制面板那里看你安装了node的那些版本"></a>在你的控制面板那里看你安装了node的那些版本</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">n</div></pre></td></tr></table></figure>
<p>终端就显示出<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">ο node/6.6.0</div><div class="line">  node/7.10.0</div></pre></td></tr></table></figure></p>
<p>因为我只安装了这两个版本<br>这个7.10.0的是我按照这个步骤安装的最新版本</p>
<h3 id="想安装最新版本的话"><a href="#想安装最新版本的话" class="headerlink" title="想安装最新版本的话"></a>想安装最新版本的话</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo n latest</div></pre></td></tr></table></figure>
<h3 id="安装稳定版本的话"><a href="#安装稳定版本的话" class="headerlink" title="安装稳定版本的话"></a>安装稳定版本的话</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo n stable</div></pre></td></tr></table></figure>
<h3 id="删除某个版本-0-10-1是版本号"><a href="#删除某个版本-0-10-1是版本号" class="headerlink" title="删除某个版本,0.10.1是版本号"></a>删除某个版本,0.10.1是版本号</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo n rm 0.10.1</div></pre></td></tr></table></figure>
<h3 id="想用一个指定的版本来执行脚本的话"><a href="#想用一个指定的版本来执行脚本的话" class="headerlink" title="想用一个指定的版本来执行脚本的话"></a>想用一个指定的版本来执行脚本的话</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo n use 版本号 some.js</div></pre></td></tr></table></figure>
<p>安装完之后 你可以再看你的node版本<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">node -v</div></pre></td></tr></table></figure></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://zhangyuki.github.io/2017/06/16/js阻止移动端默认事件以及只阻止横向滚动事件方法/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="玉英（小丸子）">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="http://imgsrc.baidu.com/forum/w%3D580/sign=aa09a14c8244ebf86d716437e9f8d736/ea6dc811728b4710787b6583c6cec3fdfd032371.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="玉英博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/06/16/js阻止移动端默认事件以及只阻止横向滚动事件方法/" itemprop="url">
                  js阻止移动端默认事件以及只阻止横向滚动事件方法
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-06-16T14:19:50+08:00">
                2017-06-16
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h5 id="js阻止移动端默认事件，是在相关的touch事件的时候利用event-preventDefault-来阻止默认滚动行为，但是如果要实现阻止横向滚动事件而不阻止竖向滚动行为就要写一个方法通过手指滑动的"><a href="#js阻止移动端默认事件，是在相关的touch事件的时候利用event-preventDefault-来阻止默认滚动行为，但是如果要实现阻止横向滚动事件而不阻止竖向滚动行为就要写一个方法通过手指滑动的" class="headerlink" title="js阻止移动端默认事件，是在相关的touch事件的时候利用event.preventDefault();来阻止默认滚动行为，但是如果要实现阻止横向滚动事件而不阻止竖向滚动行为就要写一个方法通过手指滑动的"></a>js阻止移动端默认事件，是在相关的touch事件的时候利用event.preventDefault();来阻止默认滚动行为，但是如果要实现阻止横向滚动事件而不阻止竖向滚动行为就要写一个方法通过手指滑动的</h5><h5 id="js阻止移动端默认事件，是在相关的touch事件的时候利用event-preventDefault-来阻止默认滚动行为，但是如果要实现阻止横向滚动行为而不阻止竖向滚动行为就要写一个方法通过手指滑动的偏移量来判断了。"><a href="#js阻止移动端默认事件，是在相关的touch事件的时候利用event-preventDefault-来阻止默认滚动行为，但是如果要实现阻止横向滚动行为而不阻止竖向滚动行为就要写一个方法通过手指滑动的偏移量来判断了。" class="headerlink" title="js阻止移动端默认事件，是在相关的touch事件的时候利用event.preventDefault();来阻止默认滚动行为，但是如果要实现阻止横向滚动行为而不阻止竖向滚动行为就要写一个方法通过手指滑动的偏移量来判断了。"></a>js阻止移动端默认事件，是在相关的touch事件的时候利用event.preventDefault();来阻止默认滚动行为，但是如果要实现阻止横向滚动行为而不阻止竖向滚动行为就要写一个方法通过手指滑动的偏移量来判断了。</h5><p>在手机移动端手指在滑动整个屏幕时，会影响浏览器的行为，比如滚动和缩放。所以在调用touch事件时，所以要先禁止缩放。</p>
<h5 id="移动端禁止缩放"><a href="#移动端禁止缩放" class="headerlink" title="移动端禁止缩放"></a>移动端禁止缩放</h5><p>通过meta元标签来设置。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&lt;meta name=<span class="string">"viewport"</span> content=<span class="string">"width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no"</span>&gt;&lt;/pre&gt;</div></pre></td></tr></table></figure>
<h5 id="移动端禁止滚动"><a href="#移动端禁止滚动" class="headerlink" title="移动端禁止滚动"></a>移动端禁止滚动</h5><p>preventDefault是阻止默认行为，touch事件的默认行为就是滚动。<br>event.preventDefault();</p>
<h5 id="只禁止横向滚动而不禁止竖向滚动"><a href="#只禁止横向滚动而不禁止竖向滚动" class="headerlink" title="只禁止横向滚动而不禁止竖向滚动"></a>只禁止横向滚动而不禁止竖向滚动</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">move:<span class="keyword">function</span>(event)&#123;</div><div class="line">　　//当屏幕有多个touch或者页面被缩放过，就不执行move操作 懒人建站</div><div class="line">　　<span class="keyword">if</span>(event.targetTouches.length &gt; 1 || event.scale &amp;&amp; event.scale !== 1) <span class="built_in">return</span>;</div><div class="line">　　var touch = event.targetTouches[0];</div><div class="line">　　endPos = &#123;x:touch.pageX - startPos.x,y:touch.pageY - startPos.y&#125;;</div><div class="line">　　isScrolling = Math.abs(endPos.x) &lt; Math.abs(endPos.y) ? 1:0; //isScrolling为1时，表示纵向滑动，0为横向滑动</div><div class="line">　　<span class="keyword">if</span>(isScrolling === 0)&#123;</div><div class="line">　　　　event.preventDefault(); //阻止触摸事件的默认行为，即阻止滚屏</div><div class="line">　　&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>touchmove触发后，会生成一个event对象，在event对象中获取touches触屏列表，取得第一个touch,并记下pageX,pageY的坐标，算出差值，得出手指滑动的偏移量，使当前DOM元素滑动。<br>当然move方法要在touchmove事件中调用</p>
<h5 id="阻止移动端默认事件完整测试代码："><a href="#阻止移动端默认事件完整测试代码：" class="headerlink" title="阻止移动端默认事件完整测试代码："></a>阻止移动端默认事件完整测试代码：</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line">var startPos = 0,endPos = 0,isScrolling = 0;</div><div class="line">    document.addEventListener(<span class="string">'touchstart'</span>,<span class="keyword">function</span>(event)&#123;</div><div class="line">        var touch = event.targetTouches[0]; //touches数组对象获得屏幕上所有的touch，取第一个touch</div><div class="line">        startPos = &#123;x:touch.pageX,y:touch.pageY,time:+new Date&#125;; //取第一个touch的坐标值</div><div class="line">        isScrolling = 0; //这个参数判断是垂直滚动还是水平滚动</div><div class="line">    &#125;, <span class="literal">false</span>);</div><div class="line"></div><div class="line">    //解绑事件 web前端开发</div><div class="line">    document.addEventListener(<span class="string">'touchend'</span>,<span class="keyword">function</span>(event)&#123;</div><div class="line">        document.removeEventListener(<span class="string">'touchmove'</span>,this,<span class="literal">false</span>);</div><div class="line">        document.removeEventListener(<span class="string">'touchend'</span>,this,<span class="literal">false</span>);</div><div class="line">    &#125;, <span class="literal">false</span>);</div><div class="line"></div><div class="line">    document.addEventListener(<span class="string">'touchmove'</span>,<span class="keyword">function</span>(event)&#123;</div><div class="line">        //当屏幕有多个touch或者页面被缩放过，就不执行move操作</div><div class="line">        <span class="keyword">if</span>(event.targetTouches.length &gt; 1 || event.scale &amp;&amp; event.scale !== 1) <span class="built_in">return</span>;</div><div class="line">        var touch = event.targetTouches[0];</div><div class="line">        endPos = &#123;x:touch.pageX - startPos.x,y:touch.pageY - startPos.y&#125;;</div><div class="line">        isScrolling = Math.abs(endPos.x) &lt; Math.abs(endPos.y) ? 1:0; //isScrolling为1时，表示纵向滑动，0为横向滑动</div><div class="line">        <span class="keyword">if</span>(isScrolling === 1)&#123;</div><div class="line">            alert(0);</div><div class="line">            event.preventDefault(); //阻止触摸事件的默认行为，即阻止滚屏</div><div class="line">        &#125;</div><div class="line">    &#125;, <span class="literal">false</span>);</div></pre></td></tr></table></figure>
<h5 id="例如"><a href="#例如" class="headerlink" title="例如"></a>例如</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div></pre></td><td class="code"><pre><div class="line">&lt;script <span class="built_in">type</span> = <span class="string">"text/javascript"</span>&gt;</div><div class="line">  document.addEventListener(<span class="string">'targetTouches'</span>, <span class="keyword">function</span>(event) &#123;</div><div class="line">    move(event);</div><div class="line">    event.preventDefault();</div><div class="line">  &#125;)</div><div class="line"></div><div class="line">  <span class="keyword">function</span> move(event) &#123;</div><div class="line">    <span class="keyword">if</span>(event.changedTouches.length &gt; 1 || event.scale &amp;&amp; event.scale !== 1) <span class="built_in">return</span>;</div><div class="line">  　　var touch = event.changedTouches[0];</div><div class="line">  　　endPos = &#123;x:touch.pageX - startPos.x,y:touch.pageY - startPos.y&#125;;</div><div class="line">  　　isScrolling = Math.abs(endPos.x) &lt; Math.abs(endPos.y) ? 1:0; //isScrolling为1时，表示纵向滑动，0为横向滑动</div><div class="line">  　　<span class="keyword">if</span>(isScrolling === 0)&#123;</div><div class="line">  　　　　event.preventDefault(); //阻止触摸事件的默认行为，即阻止滚屏</div><div class="line">  　　&#125;</div><div class="line">  &#125;;</div><div class="line">&lt;/script&gt;</div><div class="line"><span class="comment">##### h5页面在移动端浏览器中旋转自适应</span></div><div class="line">&lt;script <span class="built_in">type</span>=<span class="string">"text/javascript"</span>&gt;</div><div class="line">  window.addEventListener(<span class="string">'resize'</span>, dpr);</div><div class="line">  dpr(<span class="string">'init'</span>);</div><div class="line">  <span class="keyword">function</span> dpr(<span class="built_in">type</span>) &#123;</div><div class="line">    var d = document;</div><div class="line">    const desWidth = 750;</div><div class="line">    var _dpr = (1 / window.devicePixelRatio);</div><div class="line">    var orientation =</div><div class="line">      screen.orientation &amp;&amp; screen.orientation.type === <span class="string">'portrait-primary'</span> ? 0 : (window.orientation === 0 ? 0 : -90);</div><div class="line">    console.log(<span class="string">'type:'</span> + <span class="built_in">type</span> + <span class="string">' orientation:'</span> + orientation);</div><div class="line">    _dpr = 1;</div><div class="line">    const _MaxWidth = 414 * window.devicePixelRatio;</div><div class="line">    const userAgent = navigator.userAgent;</div><div class="line">    var widthStr = <span class="string">'device-width'</span>;</div><div class="line">    var isMobile = <span class="literal">true</span>;</div><div class="line">    var iWidth = 0;</div><div class="line">    var _html = d.getElementsByTagName(<span class="string">'html'</span>)[0];</div><div class="line">    /* eslint eqeqeq: 0 */</div><div class="line">    <span class="keyword">if</span> (userAgent.toLowerCase().indexOf(<span class="string">'iphone'</span>) == -1 &amp;&amp; userAgent.toLowerCase().indexOf(<span class="string">'android'</span>) == -1) &#123;</div><div class="line">      isMobile = <span class="literal">false</span>; // iWidth = _MaxWidth;</div><div class="line">      widthStr = iWidth + <span class="string">'px'</span>;</div><div class="line">    &#125;</div><div class="line">    d.querySelector(<span class="string">'[name="viewport"]'</span>).setAttribute(<span class="string">'content'</span>,</div><div class="line">      <span class="string">'width='</span> + widthStr + <span class="string">' , initial-scale='</span> + _dpr + <span class="string">', maximum-scale='</span> + _dpr + <span class="string">', minimum-scale='</span> + _dpr + <span class="string">', user-scalable=no'</span>);</div><div class="line">    // 竖屏</div><div class="line">    <span class="keyword">if</span> (orientation === 0) &#123;</div><div class="line">      iWidth = Math.min(d.documentElement.clientWidth, window.innerWidth);</div><div class="line">    &#125; <span class="keyword">else</span> &#123;</div><div class="line">      iWidth = Math.min(d.documentElement.clientWidth, window.innerWidth, window.innerHeight);</div><div class="line">    &#125;</div><div class="line">    console.log(<span class="string">'clientWidth:'</span> + d.documentElement.clientWidth + <span class="string">' innerWidth:'</span> + window.innerWidth + <span class="string">' innerHeight:'</span> + window.innerHeight);</div><div class="line">    console.log(<span class="string">'iWidth: '</span> + iWidth + <span class="string">' desWidth: '</span> + desWidth);</div><div class="line">    <span class="keyword">if</span> (!isMobile) iWidth = _MaxWidth;</div><div class="line">    _html.style.fontSize = (((100 * iWidth) / desWidth)) + <span class="string">'px'</span>;</div><div class="line">    _html.dataset.dpr = 1; // window.devicePixelRatio;</div><div class="line">  &#125;;</div><div class="line">&lt;/script&gt;</div></pre></td></tr></table></figure>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://zhangyuki.github.io/2017/05/26/OpenVPN/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="玉英（小丸子）">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="http://imgsrc.baidu.com/forum/w%3D580/sign=aa09a14c8244ebf86d716437e9f8d736/ea6dc811728b4710787b6583c6cec3fdfd032371.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="玉英博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/05/26/OpenVPN/" itemprop="url">
                  Mac上使用OpenVPN
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-05-26T23:45:24+08:00">
                2017-05-26
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h4 id="Mac"><a href="#Mac" class="headerlink" title="Mac"></a>Mac</h4><ol>
<li>打开Mack中的命令行工具</li>
<li>在打开的命令行工具中输入如下语句：</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ruby <span class="_">-e</span> <span class="string">"<span class="variable">$(curl --insecure -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)</span>"</span></div></pre></td></tr></table></figure>
<ol>
<li>按回车键</li>
<li>输入密码<br>此时能够看到 installation successful 安装成功</li>
<li><p>此时可以在命令行中输入命令brew进行测试，可以看到如下结果,说明安装成功。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">6. brew install openvpn  </div><div class="line">7. openvpn --version  查看版本</div><div class="line">8. git <span class="built_in">clone</span> https://github.com/OpenVPN/easy-rsa.git</div><div class="line">9. <span class="built_in">cd</span> easy-rsa</div><div class="line">10. <span class="built_in">cd</span> easyrsa3</div><div class="line">11. cp openssl.conf openssl.conf</div></pre></td></tr></table></figure>
</li>
<li><p>进入openvpn所在目录<br>cd /usr/local/etc/openvpn</p>
</li>
<li><p>安装Tunnelblick  <a href="https://tunnelblick.net" target="_blank" rel="external">https://tunnelblick.net</a></p>
</li>
<li><p>新增vpn 配置将config.ovpn文件拖拽到工具中</p>
</li>
</ol>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel sidebar-panel-active">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="http://imgsrc.baidu.com/forum/w%3D580/sign=aa09a14c8244ebf86d716437e9f8d736/ea6dc811728b4710787b6583c6cec3fdfd032371.jpg"
               alt="玉英（小丸子）" />
          <p class="site-author-name" itemprop="name">玉英（小丸子）</p>
           
              <p class="site-description motion-element" itemprop="description">将来的你，一定会感谢现在拼命努力的自己</p>
          
        </div>
        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
              <a href="/archives">
                <span class="site-state-item-count">17</span>
                <span class="site-state-item-name">日志</span>
              </a>
            </div>
          

          

          

        </nav>

        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/zhangyuki" target="_blank" title="Github">
                  
                    <i class="fa fa-fw fa-globe"></i>
                  
                  Github
                </a>
              </span>
            
          
        </div>

        
        

        
        

        


      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">玉英（小丸子）</span>
</div>


<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Pisces
  </a>
</div>


        

        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.1"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.1"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.1"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.1"></script>



  


  




	





  





  





  






  





  

  

  

  

  

</body>
</html>
